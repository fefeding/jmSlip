var slip=function(t,i){var e=["","-ms-","-webkit-","-o-","-moz-"],n="ontouchstart"in t,o=30,s=n?"touchstart":"mousedown",a=n?"touchmove":"mousemove",r=n?"touchend":"mouseup",h=n?"touchcancel":"mouseleave";function p(t,i,e){switch(this.target=this.container=t,this.containerInner=this.container.children[0],this.mode=i,this.page=e.page||0,this.offsetY=0,this.option=e,this.slipObj=null,i){case"page":this.slipObj=new c(this);break;case"item":this.slipObj=new l(this);break;case"scroll":this.slipObj=new f(this);break;case"scrollItem":this.slipObj=new u(this);break;case"drag":this.slipObj=new d(this);break;case"scale":this.slipObj=new g(this)}this.reset(),this.bindEvent(),this.auto()}function c(t){this.instance=t,this.option=t?t.option:{},this.option.animate="page",this.offsetY=0,this.offsetX=0,this.page=t&&t.page?t.page:0,this.transition="transform "+this.option.durations+"s ease-in-out 0s",this.children=[],t&&t.containerInner&&(v(t.containerInner,"position","relative"),this.instance.containerInner.children[this.page]&&(this.instance.containerInner.children[this.page].style.zIndex=this.option.zIndex))}function f(t){this.instance=t,this.option=t.option,this.offsetY=0,this.offsetX=0}function l(t){this.instance=t,this.option=t.option,this.offsetY=0,this.offsetX=0,this.page=t.page||0,this.transition="transform "+this.option.durations+"s ease-in-out 0s"}function d(t){this.instance=t,t.container=i,t.containerInner=t.target,this.option=t.option,this.offsetY=0,this.offsetX=0,this.onTouchStart=function(t){t&&t.preventDefault&&t.preventDefault()}}function u(t){this.instance=t,this.option=t.option}function g(t){this.instance=t,this.option=t.option,t.containerInner=this.option.target||t.containerInner,this.offsetY=0,this.offsetX=0,this.scaleX=1,this.scaleY=1,this.onTouchStart=function(t){t&&t.preventDefault&&t.preventDefault()}}function v(t,i,e,n){if(I(e)&&(n=e),n=n||[""],"object"==typeof i)for(var o in i)"string"!=typeof i[o]&&"number"!=typeof i[o]||v(t,o,i[o],n);else for(var s=0;s<n.length;s++)t.style&&(t.style[n[s]+i]=e)}function x(t,i,e){if(void 0===e&&(e=1),I(t))for(var n=0;n<t.length;n++)x(t[n],i,e);else{var o=(t.className||"").split(" "),s=!1,a=o.length;for(n=0;n<a;n++)o[n]==i&&(e||(o[n]=""),s=!0);(s&&!e||!s&&e)&&(e&&o.push(i),t.className=o.join(" "))}}function m(t,e,n){if(I(t)){for(var o=null,s=0;s<t.length;s++)o=m(t[s],e,n);return o}var a=t.attributes[e];return void 0===n?a?a.nodeValue:null:(a?a.nodeValue=n:((a=i.createAttribute(e)).nodeValue=n,t.setAttributeNode(a)),n)}function y(t,i,e){return t.addEventListener?(t.addEventListener(i,e,!1),!0):!!t.attachEvent&&t.attachEvent("on"+i,e)}function b(t,i,e){return t.removeEventListener?(t.removeEventListener(i,e,!1),!0):!!t.detachEvent&&t.detachEvent("on"+i,e)}function I(t){var i=Object.prototype.toString.call(t);return"[object Array]"==i||"[object NodeList]"==i}function O(t,i){var e=t.parentElement||t.parentNode;if(!e)return null;var n=e.querySelector(i);return n&&n==t?t:O(e,i)}return p.prototype.destory=function(){this.bindEvent(!1),this.interval&&clearTimeout(this.interval)},p.prototype.bindEvent=function(e){var n=this;this.touched=!1;var o=[],p=[],c=[],f="",l="",d=!1,u=null;function g(i){if((i=i||t.event,o=[],p=[],c=[],n.option&&n.option.onTouchStart&&"function"==typeof n.option.onTouchStart)&&!1===n.option.onTouchStart.call(n.slipObj,i))return;if(n.slipObj&&n.slipObj.onTouchStart&&!1===n.slipObj.onTouchStart(i))return;if(n.interval&&clearTimeout(n.interval),n.touched=!0,d=!1,u=i.timeStamp,i.touches&&i.touches.length)for(var e=0;e<i.touches.length;e++)c[e]=p[e]={x:i.touches[e].clientX||i.touches[e].pageX,y:i.touches[e].clientY||i.touches[e].pageY},o[e]={x:c[e].x,y:c[e].y};else c[0]=p[0]={x:i.clientX||i.pageX,y:i.clientY||i.pageY},o[0]={x:c[0].x,y:c[0].y};n.slipObj&&n.slipObj.setTransition?n.slipObj.setTransition(!1):n.transition(!1)}function v(i){if(i=i||t.event,n.touched){for(var e=[],s=0;s<p.length;s++)p[s]&&c[s]&&(p[s].x=c[s].x,p[s].y=c[s].y);if(i.touches&&i.touches.length)for(s=0;s<i.touches.length;s++)c[s]={x:i.touches[s].clientX||i.touches[s].pageX,y:i.touches[s].clientY||i.touches[s].pageY},p[s]&&(e[s]={x:c[s].x-p[s].x,y:c[s].y-p[s].y,absoluteX:c[s].x-o[s].x,absoluteY:c[s].y-o[s].y},c[s]&&c[s].y>p[s].y?e[s].yDirection=f="down":e[s].yDirection=f="up",c[s]&&c[s].x>p[s].x?e[s].xDirection=l="right":e[s].xDirection=l="left");else c[0]={x:i.clientX||i.pageX,y:i.clientY||i.pageY},p[0]&&(e[0]={x:c[0].x-p[0].x,y:c[0].y-p[0].y,absoluteX:c[0].x-o[0].x,absoluteY:c[0].y-o[0].y},c[0]&&c[0].y>p[0].y?e[0].yDirection=f="down":e[0].yDirection=f="up",c[0]&&c[0].x>p[0].x?e[0].xDirection=l="right":e[0].xDirection=l="left");i.prePositions=p,i.positions=c,i.offsetPos=e;var a=!0;if(n.option&&n.option.onTouchMove&&"function"==typeof n.option.onTouchMove)!1===n.option.onTouchMove.call(n.slipObj,i,{offx:e[0]?e[0].absoluteX:0,offy:e[0]?e[0].absoluteY:0})&&(a=!1);a&&e[0]&&(d=!0,a=n.slipObj.offset(e[0].x,e[0].y,i)),!1===a&&x.call(this,i)}}function x(i){if(i=i||t.event,n.touched){var e=[];if(i.touches&&i.touches.length)for(var s=0;s<i.touches.length;s++)p[s]&&(e[s]={x:c[s].x-p[s].x,y:c[s].y-p[s].y,absoluteX:c[s].x-o[s].x,absoluteY:c[s].y-o[s].y}),c[s]={x:i.touches[s].clientX||i.touches[s].pageX,y:i.touches[s].clientY||i.touches[s].pageY};else p[0]&&(e[0]={x:c[0].x-p[0].x,y:c[0].y-p[0].y,absoluteX:c[0].x-o[0].x,absoluteY:c[0].y-o[0].y},p[0].x=c[0].x,p[0].y=c[0].y),c[0]={x:i.clientX||i.pageX,y:i.clientY||i.pageY};if(i.offsetPos=e,n.option&&n.option.onTouchEnd&&"function"==typeof n.option.onTouchEnd)if(!1===n.option.onTouchEnd.call(n.slipObj,i,{offx:e[0]?e[0].absoluteX:0,offy:e[0]?e[0].absoluteY:0}))return;n.slipObj&&n.slipObj.setTransition?n.slipObj.setTransition(!0):n.transition(!0),i.startTime=u,d&&n.slipObj.end&&n.slipObj.end(e[0].absoluteX,e[0].absoluteY,l,f,i),n.touched=!1,n.auto()}}var m=0,I=0;function O(i){m&&clearTimeout(m);var e=(i=i||t.event).wheelDelta;I+=e,n.slipObj.offset(0,e,i),m=setTimeout((function(){I>0?n.slipObj.previous&&n.slipObj.previous():I<0&&n.slipObj.next&&n.slipObj.next(),I=0}),500)}!1===e?(b(this.target,s,g),b(this.container,a,v),b(this.container,r,x),b(this.container,h,x)):(y(this.target,s,g),y(this.container,a,v),y(this.container,r,x),y(this.container,h,x)),this.option.mousewheel&&(!1===e?b(i,"mousewheel",O):y(i,"mousewheel",O))},p.prototype.auto=function(){if(this.option.changeTime&&this.slipObj.go){var t=1,i=this;this.interval&&clearTimeout(this.interval),this.interval=setTimeout((function e(){if(!i.touched){var n=i.slipObj.page+t,o=i.containerInner.children.length;i.slipObj.children&&i.slipObj.children.length&&(o=i.slipObj.children.length),i.option.loop||(n<0?(n=1,t=1):n>=o&&(t=-1,n=i.slipObj.page+t)),i.slipObj.go&&i.slipObj.go(n,"auto"),i.interval=setTimeout(e,i.option.changeTime)}}),this.option.changeTime)}},p.prototype.reset=function(){this.slipObj.reset&&this.slipObj.reset()},p.prototype.transition=function(t,i,n){void 0===t&&(t=!0);var o="transform 0s "+(n=n||"ease")+" 0s";if(t&&(o=this.slipObj&&this.slipObj.transition?this.slipObj.transition:"transform "+this.option.durations+"s "+n+" 0s"),this.option.animate&&"default"!=this.option.animate)for(s=0;s<e.length;s++)this.setStyle(e[s]+"transition",e[s]+o,null,i);else for(var s=0;s<e.length;s++)v(i||this.containerInner,e[s]+"transition",e[s]+o)},p.prototype.setStyle=function(t,i,e,n){n=n||this.containerInner.children;for(var o=0;o<n.length;o++)v(n[o],t,i,e)},p.prototype.go=function(t){this.slipObj.go&&this.slipObj.go(t)},c.prototype.initChildren=function(){if(this.option.repeat&&(this.children=[]),this.instance&&this.instance.containerInner)for(var t=1,i=0;i<this.instance.containerInner.children.length;i++){var n=this.instance.containerInner.children[i],o=m(n,"data-page");void 0===o?m(n,"data-page",i%t):t=parseInt(o,10)+1;for(var s=!1,a=0;a<this.children.length;a++)if(this.children[a]==n){s=!0;break}if(s||(this.children.push(n),v(n,{position:"absolute",width:"100%",height:"100%",top:0,left:0})),"x"==this.instance.option.direction){v(n,"transform","translate3d("+(this.option.repeat?(i-this.page)*this.pageWidth:i<this.page?-this.pageWidth:i>this.page?this.pageWidth:0)+"px,0px,0px)",e)}else{var r=0;this.option.repeat?(i-this.page)*this.pageHeight:r=i<this.page?-this.pageHeight:i>this.page?this.pageHeight:0,v(n,"transform","translate3d(0px,"+r+"px,0px)",e)}}},c.prototype.reset=function(){"x"==this.instance.option.direction?this.pageWidth=this.instance.option.width||this.instance.container.offsetWidth:this.pageHeight=this.instance.option.height||this.instance.container.offsetHeight;var t=this.instance.containerInner.children.length;if(2==t&&this.option.loop)for(var i=0;i<t;i++){m(this.instance.containerInner.children[i],"data-page",i),this.instance.containerInner.innerHTML+=this.instance.containerInner.children[i].outerHTML}this.initChildren(),this.instance.transition(!1,this.children),this.go(this.page);var e=this;setTimeout((function(){e.instance.transition(!0,e.children)}),50)},c.prototype.offset=function(t,i,e){return"x"==this.instance.option.direction?(Math.abs(t)>Math.abs(i)?(t+=this.offsetX,e&&e.preventDefault&&e.preventDefault()):t=!1,i=!1):(Math.abs(i)>Math.abs(t)?(i+=this.offsetY,e&&e.preventDefault&&e.preventDefault()):i=!1,t=!1),this.move(t,i)},c.prototype.move=function(t,i){var n=this.children[this.page-1],o=this.children[this.page],s=this.children[parseInt(this.page||0,10)+1];if(!o||o.parentNode||this.option.repeat||this.instance.containerInner.appendChild(o),this.option.loop&&(n||(n=this.children[this.children.length-1]),s||(s=this.children[0])),!1!==t){if(this.option.locked&&!n&&t>0)return;if(this.option.locked&&!s&&t<0)return;if(this.option.repeat)for(var a=0;a<this.children.length;a++){var r=(a-this.page)*this.pageWidth+t;v(this.children[a],"transform","translate3d("+r+"px,0px,0px)",e)}else n&&v(n,"transform","translate3d("+(t-this.pageWidth)+"px,0px,0px)",e),s&&v(s,"transform","translate3d("+(this.pageWidth+t)+"px,0px,0px)",e),o&&(v(o,"transform","translate3d("+t+"px,0px,0px)",e),o.style.zIndex=this.option.zIndex);this.offsetX=t}if(!1!==i){if(this.option.locked&&!n&&i>0)return;if(this.option.locked&&!s&&i<0)return;if(!n&&this.option.locked)return;if(this.option.repeat)for(a=0;a<this.children.length;a++){var h=(a-this.page)*this.pageHeight+i;v(this.children[a],"transform","translate3d(0px,"+h+"px,0px)",e)}else n&&v(n,"transform","translate3d(0px,"+(i-this.pageHeight)+"px,0px)",e),s&&v(s,"transform","translate3d(0px,"+(this.pageHeight+i)+"px,0px)",e),o&&(v(o,"transform","translate3d(0px,"+i+"px,0px)",e),o.style.zIndex=this.option.zIndex);this.offsetY=i}},c.prototype.end=function(t,i,e,n,s){"x"==this.instance.option.direction?t>o&&"right"==e?this.previous():t<-o&&"left"==e?this.next():this.go(this.page):i>o&&"down"==n?this.previous():i<-o&&"up"==n?this.next():this.go(this.page)},c.prototype.next=function(){this.go(this.page+1)},c.prototype.previous=function(){this.go(this.page-1)},c.prototype.go=function(t,i){var n=this.children.length,o=this.page;if((t<0?t=this.option.loop?n-1:0:t>n-1&&(t=this.option.loop?0:n-1),this.option&&this.option.onPageStart&&"function"==typeof this.option.onPageStart)&&!1===this.option.onPageStart.call(this,t,o,i))return void this.reset();if(this.page=this.instance.page=t,this.option.repeat)this.initChildren();else{var s=this.children[t];if(s&&(s.style.zIndex=this.option.zIndex),o>t){if(!this.option.repeat)if((r=this.children[o+1])&&s!=r&&r.parentNode)this.instance.containerInner.removeChild(r);else if(!r&&0==t){(r=this.children[t+1])&&(r.style.zIndex=this.option.zIndex-2,!r.parentNode&&this.instance.containerInner.appendChild(r))}!(a=this.children[t-1])&&0===t&&this.option.loop&&(v(a=this.children[n-1],"display","none"),setTimeout((function(){v(a,"display","")}),1e3*this.option.durations)),a&&(o!=n-1&&1!=t||(a.style.zIndex=this.option.zIndex-2),"x"==this.instance.option.direction?v(a,"transform","translate3d("+(0-this.pageWidth)+"px,0px,0px)",e):v(a,"transform","translate3d(0px,"+(0-this.pageHeight)+"px,0px)",e),this.option.repeat||a.parentNode||(a.style.zIndex=this.option.zIndex-2,s.parentNode?this.instance.containerInner.insertBefore(a,s):this.instance.containerInner.appendChild(a)))}else if(o<t){var a,r;if(!this.option.repeat)(a=this.children[o-1])&&s!=a&&a.parentNode&&this.instance.containerInner.removeChild(a),0!==o||t!==n-1||a||(a=this.children[t-1])&&(a.style.zIndex=this.option.zIndex-2,a.parentNode||(s.parentNode?this.instance.containerInner.insertBefore(a,s):this.instance.containerInner.appendChild(a)));!(r=this.children[t+1])&&t===n-1&&this.option.loop&&(v(r=this.children[0],"display","none"),setTimeout((function(){v(r,"display","")}),1e3*this.option.durations)),r&&(0!=o&&t!=n-2||(r.style.zIndex=this.option.zIndex-2),"x"==this.instance.option.direction?v(r,"transform","translate3d("+this.pageWidth+"px,0px,0px)",e):v(r,"transform","translate3d(0px,"+this.pageHeight+"px,0px)",e),this.option.repeat||r.parentNode||(r.style.zIndex=this.option.zIndex-2,this.instance.containerInner.appendChild(r)))}else if(!this.option.repeat&&this.instance.containerInner.children.length>3)for(var h=this.instance.containerInner.children.length,p=h-1;p>=0;p--){var c=this.instance.containerInner.children[p];if(p<t-1||p>t+1){if(0==t&&this.option.loop&&p==h-1)continue;if(t==h-1&&this.option.loop&&0==p)continue;c.parentNode&&s!=c&&this.instance.containerInner.removeChild(c)}}}if(this.move(0,0),this.option&&this.option.onPageEnd&&"function"==typeof this.option.onPageEnd){var f=s&&m(s,"data-page")||t;this.option.onPageEnd.call(this,o,f,i)}return this.offsetX=0,this.offsetY=0,!0},c.prototype.pageEnd=function(t,i){if("string"==typeof i&&(i=parseInt(i,10)),"string"==typeof t&&(t=parseInt(t,10)),!(t==i||t<0||i<0)){for(var e=this.children&&this.children.length?this.children:this.instance.containerInner.children,n=e[t],o=e[i],s=o.querySelectorAll("img[data-src]"),a=0;a<s.length;a++){var r=s[a];m(r,"src",m(r,"data-src"))}if(x(o.querySelectorAll(".jmslip-ani"),"jmslip-ani-normal",!0),n){var h=n.querySelectorAll(".jmslip-ani");x(h,"jmslip-ani",!1),x(h,"jmslip-ani-normal",!1),setTimeout((function(){x(h,"jmslip-ani",!0)}),20)}setTimeout((function(){for(var t=o.querySelectorAll(".jmslip-flash"),i=0;i<t.length;i++){var e="jmslip-flash"+(i%3+1);x(t[i],e,!0)}if(n){t=n.querySelectorAll(".jmslip-flash");for(i=0;i<t.length;i++){e="jmslip-flash"+(i%3+1);x(t[i],e,!1)}}}),500)}},f.prototype.reset=function(){var t=this.instance.containerInner.children.length;if("x"==this.instance.option.direction){for(var i=this.instance.option.paddingRight||0,e=0;e<t;e++)i+=this.instance.containerInner.children[e].offsetWidth+this.instance.option.itemOffWidth;v(this.instance.containerInner,"min-width",i+"px")}else{var n=this.instance.option.paddingBottom||0;for(e=0;e<t;e++)n+=this.instance.containerInner.children[e].offsetHeight+this.instance.option.itemOffHeight;v(this.instance.containerInner,"min-height",n+"px")}this.move(0,0);var o=this;setTimeout((function(){o.instance.transition(!0,o.instance.containerInner)}),10)},f.prototype.offset=function(t,i,e){return"x"==this.instance.option.direction?(Math.abs(t)>Math.abs(i)?(t+=this.offsetX,e&&e.preventDefault&&e.preventDefault()):t=!1,i=!1):(Math.abs(i)>Math.abs(t)?(i+=this.offsetY,e&&e.preventDefault&&e.preventDefault()):i=!1,t=!1),this.move(t,i)},f.prototype.move=function(t,i){if(!1!==t){var n="translate3d("+t+"px,0px,0px)";v(this.instance.containerInner,"transform",n,e),this.offsetX=t}if(!1!==i){var o="translate3d(0px,"+i+"px,0px)";v(this.instance.containerInner,"transform",o,e),this.offsetY=i}},f.prototype.end=function(t,i,e,n,s){if("x"==this.instance.option.direction)if(this.offsetX>0)this.reset();else{var a=this.instance.containerInner.offsetWidth-this.instance.container.offsetWidth;this.offsetX<-a?this.move(-a,!1):o&&this.offset("left"==e?-o:o,!1)}else if(this.offsetY>0)this.reset();else{a=this.instance.containerInner.offsetHeight-this.instance.container.offsetHeight;this.offsetY<-a?this.move(!1,-a):o&&this.offset(!1,"up"==n?-o:o)}this.instance.option.onScrollEnd&&this.instance.option.onScrollEnd.call(this,this.offsetX,this.offsetY,e,n,s)},l.prototype=new c,l.prototype.reset=function(){if("x"==this.instance.option.direction){for(var t=0,i=0;i<this.instance.containerInner.children.length;i++)t+=this.instance.containerInner.children[i].offsetWidth+this.instance.option.itemOffWidth;v(this.instance.containerInner,"width",t+"px")}else{var e=0;for(i=0;i<this.instance.containerInner.children.length;i++)e+=this.instance.containerInner.children[i].offsetHeight+this.instance.option.itemOffHeight;v(this.instance.containerInner,"height",e)}this.go(this.page);var n=this;setTimeout((function(){n.instance.transition(!0,n.instance.containerInner)}),10)},l.prototype.end=function(t,i,e,n,s){var a=!1;if("x"==this.instance.option.direction){if(t>o||t<-o){var r=this.getCenterIndex(t,i);if(this.instance.option.selectHandler)"number"==typeof(h=this.instance.option.selectHandler(this.page,r))&&h!=r?r=h:!1===h&&(r=this.page);a=this.go(r)}}else if(i>o||i<-o){var h;r=this.getCenterIndex(t,i);if(this.instance.option.selectHandler)"number"==typeof(h=this.instance.option.selectHandler(this.page,r))&&h!=r?r=h:!1===h&&(r=this.page);a=this.go(r)}a||this.reset()},l.prototype.go=function(t){var i=this.instance.containerInner.children.length,e=this.page;if(t<0?t=0:t>i-1&&(t=i-1),this.option&&this.option.onPageStart&&"function"==typeof this.option.onPageStart){var n=this.option.onPageStart.call(this,t);if(!1===n)return!1;"number"==typeof n&&(t=n)}var o=!1,s=!1;if("x"==this.instance.option.direction){o=this.instance.container.offsetWidth/2;for(var a=0;a<i;a++){var r=this.instance.containerInner.children[a].offsetWidth+this.instance.option.itemOffWidth;if(a==t){o-=r/2;break}o-=r}}else{s=this.instance.container.offsetHeight/2;for(a=0;a<i;a++){var h=this.instance.containerInner.children[a].offsetHeight+this.instance.option.itemOffHeight;if(a==t){s-=h/2;break}s-=h}}return this.move(o,s),this.page=this.instance.page=t,this.option&&this.option.onPageEnd&&"function"==typeof this.option.onPageEnd&&this.option.onPageEnd.call(this,e,t),this.pageEnd(e,t),!0},l.prototype.getCenterIndex=function(t,i){if("x"==this.instance.option.direction){for(var e=this.instance.containerInner.children.length,n=0,o=0,s=0,a=this.instance.container.offsetWidth/2-this.offsetX,r=0;r<e;r++){var h=this.instance.containerInner.children[r].offsetWidth+this.instance.option.itemOffWidth;if((o+=h)>=a){o-a-h/2<s&&(n=r);break}s=a-o+h/2,n=r}return n}e=this.instance.containerInner.children.length,n=0;var p=0,c=0,f=this.instance.container.offsetHeight/2-this.offsetY;for(r=0;r<e;r++){var l=this.instance.containerInner.children[r].offsetHeight+this.instance.option.itemOffHeight;if((p+=l)>=f){p-f-l/2<c&&(n=r);break}c=f-p+l/2,n=r}return n},l.prototype.offset=function(t,i,e){return"x"==this.instance.option.direction?(Math.abs(t)>Math.abs(i)?(t+=this.offsetX,e&&e.preventDefault&&e.preventDefault()):t=!1,i=!1):(Math.abs(i)>Math.abs(t)?(i+=this.offsetY,e&&e.preventDefault&&e.preventDefault()):i=!1,t=!1),this.move(t,i)},l.prototype.move=function(t,i){if(this.instance.option.animate&&"default"!=this.instance.option.animate){var n=Math.ceil(Math.abs(t/this.instance.container.offsetWidth)),o=Math.abs(t%this.instance.container.offsetWidth)/this.instance.container.offsetWidth*180;switch(n>this.page&&(o=-o),this.instance.option.animate){case"flip":v(this.instance.containerInner.children[this.page],"transform","rotateY("+o+"deg)",e),v(this.instance.containerInner.children[n],"transform","rotateY("+-o+"deg)",e)}}else{if(!1!==t){var s="translate3d("+t+"px,0px,0px)";v(this.instance.containerInner,"transform",s,e),this.offsetX=t}if(!1!==i){var a="translate3d(0px,"+i+"px,0px)";v(this.instance.containerInner,"transform",a,e),this.offsetY=i}}},d.prototype.reset=function(){this.instance.transition(!0,this.instance.containerInner)},d.prototype.offset=function(t,i,e){return t+=this.offsetX,i+=this.offsetY,e&&e.stopPropagation&&e.stopPropagation(),this.move(t,i)},d.prototype.move=function(t,i){var n="translate3d("+t+"px,"+i+"px,0px)";v(this.instance.containerInner,"transform",n,e),this.offsetX=t,this.offsetY=i},d.prototype.end=function(t,i,e,n,o){this.option.dragEnd&&"function"==typeof this.option.dragEnd&&this.option.dragEnd.call(this,t,i)},u.prototype.reset=function(t){if(t)return this.move(0,0,t),void this.setTransition(!0,t);var i=this;setTimeout((function(){for(var t=i.instance.container.children.length,e=0;e<t;e++){var n=i.instance.container.children[e];i.option.itemSelector&&!(n=n.querySelector(i.option.itemSelector))||i.reset(n)}}),10)},u.prototype.setTransition=function(t,i){if(i)this.instance.transition(!!t,i);else for(var e=this.instance.container.children.length,n=0;n<e;n++){var o=this.instance.container.children[n];this.option.itemSelector&&(o=o.querySelector(this.option.itemSelector)),o&&this.setTransition(t,o)}},u.prototype.offset=function(t,i,e){if(e){var n=e.target||e.srcElement;if(!this.option.itemSelector||(n=O(n,this.option.itemSelector))){if("x"==this.instance.option.direction){if(Math.abs(t)>Math.abs(i)){t+=Number(m(n,"data-offsetx"))||0;var o=this.option.maxOffset||n.offsetWidth;if("left"==this.option.orientation&&(t>0||t<-o))return;if("right"==this.option.orientation&&(t<0||t>o))return;e&&e.preventDefault&&e.preventDefault()}else t=!1;i=!1}else{if(Math.abs(i)>Math.abs(t)){i+=Number(m(n,"data-offsety"))||0;o=this.option.maxOffset||n.offsetHeight;if("top"==this.option.orientation&&(i>0||i<-o))return;if("bottom"==this.option.orientation&&(i<0||i>o))return;e&&e.preventDefault&&e.preventDefault()}else i=!1;t=!1}return this.move(t,i,n)}}},u.prototype.move=function(t,i,n){if(n){if(!1!==t)v(n,"transform","translate3d("+t+"px,0px,0px)",e),m(n,"data-offsetx",t);if(!1!==i)v(n,"transform","translate3d(0px,"+i+"px,0px)",e),m(n,"data-offsety",i)}},u.prototype.end=function(t,i,e,n,o){var s=o.target||o.srcElement;if(!this.option.itemSelector||(s=O(s,this.option.itemSelector))){if("x"==this.instance.option.direction){var a=Number(m(s,"data-offsetx"))||0;if(!a)return;if(a>0&&"left"==this.option.orientation||a<0&&"right"==this.option.orientation)this.reset(s);else{var r=this.option.maxOffset||s.offsetWidth;"left"==this.option.orientation&&a<=-r/2?this.move(-r,!1,s):"right"==this.option.orientation&&a>=r/2?this.move(r,!1,s):this.reset(s)}}else{var h=Number(m(s,"data-offsety"))||0;if(!h)return;if(h>0&&"top"==this.option.orientation||h<0&&"bottom"==this.option.orientation)this.reset(s);else{r=this.option.maxOffset||s.offsetHeight;"top"==this.option.orientation&&h<=-r/2?this.move(!1,-r,s):"bottom"==this.option.orientation&&h>=r/2?this.move(!1,r,s):this.reset(s)}}this.last_target&&this.last_target!=s&&this.reset(this.last_target),this.last_target=s,this.instance.option.onScrollEnd&&this.instance.option.onScrollEnd.call(this,a,h,e,n,o,s)}},g.prototype.reset=function(){this.set(1,0,0)},g.prototype.offset=function(t,i,e){if(e.offsetPos&&2==e.offsetPos.length){var n=e.prePositions[0].x-e.prePositions[1].x,o=e.prePositions[0].y-e.prePositions[1].y,s=Math.sqrt(n*n+o*o),a=e.positions[0].x-e.positions[1].x,r=e.positions[0].y-e.positions[1].y,h=Math.sqrt(a*a+r*r),p=Math.abs(n-a),c=Math.abs(o-r),f=this.instance.container.offsetWidth||this.instance.container.clientWidth,l=this.instance.container.offsetHeight||this.instance.container.clientHeight;if(!f||!l)return;var d=p/f,u=c/l,g=0;s<h?g=this.scaleX+this.scaleX*Math.max(d,u):s>h&&(g=this.scaleX*Math.min(1-d,1-u)),this.scale(g)}else if(this.option.supportTranslate&&e.offsetPos&&1==e.offsetPos.length)(t||i)&&e&&e.preventDefault&&e.preventDefault(),!1===t?t=this.offsetX:t/=this.scaleX,!1===i?i=this.offsetY:i/=this.scaleY,this.set(0,this.offsetX+t,this.offsetY+i);else if(e.wheelDelta){console.log(e.wheelDelta);g=0;g=e.wheelDelta>0?this.scaleX+this.scaleX*e.wheelDelta/1e3:this.scaleX*(1+e.wheelDelta/1e3),this.scale(g)}},g.prototype.scale=function(t,i){if(t){if(this.option.onScaleStart)if(!1===this.option.onScaleStart(t,i))return;this.set(t),this.option.onScaleEnd&&this.option.onScaleEnd(t,i),i&&i.preventDefault&&i.preventDefault()}},g.prototype.set=function(t,i,n){t||(t=this.scaleX),this.option.maxScale&&t>this.option.maxScale&&(t=this.option.maxScale),this.option.minScale&&t<this.option.minScale&&(t=this.option.minScale),void 0===i&&(i=this.offsetX),void 0===n&&(n=this.offsetY),this.offsetX=i,this.offsetY=n;var o="scale("+t+","+t+") translate3d("+i+"px,"+n+"px,0px)";v(this.instance.containerInner,"transform",o,e),this.scaleX=this.scaleY=t},g.prototype.setTransition=function(t){},t.jmSlip=function(t,e,n){return"object"==typeof e&&(e=(n=e).mode||"page"),(n=n||{}).duration=n.duration||500,n.durations=n.duration/1e3,"string"==typeof n.minOffset&&(o=Number(n.minOffset)),n.itemOffWidth=n.itemOffWidth||0,n.itemOffHeight=n.itemOffHeight||0,n.zIndex=n.zIndex||1e4,e=e||n.mode||"page",o=n.minOffset||o,"string"==typeof t&&(t=i.getElementById(t)),t&&t.length&&(t=t[0]),new p(t,e,n)}}(window,document);export default slip;